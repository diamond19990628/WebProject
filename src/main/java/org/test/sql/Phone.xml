<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
 <mapper namespace="org.test.dao.PreductDao">
 	<select id="PreductRead" parameterType="int" resultType="org.test.entity.Preduct" >
 		select * from (select c.*,rownum r from (select * from Phone where status = '0')c) where r>#{0} and r&lt;#{1}
 	</select>
 	
 	<select id="PhoneStatusRead" parameterType="java.lang.String" resultType="java.lang.String">
 		select status from Phone where pNumber = #{phone}
 	</select>
 	
 	<select id="PreductReadMath" resultType="int">
 		select count(*) from Phone
 	</select>
 	
 	<update id="phoneStatusUpdate1" parameterType="java.lang.String">
 		update Phone set status = '1' where pnumber = #{phone}
 	</update>
 	
 	<update id="phoneStatusUpdate2" parameterType="java.lang.String">
 		update Phone set status = '0' where pnumber = #{0}
 	</update>
 	
 	<update id="TimeUpdate" parameterType="java.lang.String">
 		update Phone set Lastoperation = to_char(sysdate,'YYYY-MM-DD HH24:MI:SS') where pnumber = #{0}
 	</update>
 	
 	<select id="UpdateTimeRead" resultType="java.lang.String">
 		select lastoperation from Phone where status = '1'
 	</select>
 	
 	<update id="phonestatusChange">
 		update Phone set status = '0' where status ='1'
 	</update>
 	
 	<insert id="PreductShow" parameterType="org.test.entity.UserPreduct">
 		insert into PreductInfo values(seq_id.nextval,#{username},#{idcard},#{phone},#{amount},#{basic},to_char(sysdate,'YYYY-MM-DD HH24:MI:SS'),'0')
 	</insert>
 	
 	<update id="TelepUpdate" parameterType="java.lang.String">
 		update Usertable set telep = #{0} where idcard = #{1}
 	</update>
 	
 	<update id="UpdatePreduct">
 		update Phone set status = '2' where pnumber = #{0}
 	</update>
 	
 	<select id="KDPreductRead" resultType="java.util.Map">
 		select id,KDName,KDspeed,amount from KDPreduct
 	</select>
 	
 	<select id="TelInfoRead" parameterType="java.lang.String" resultType="org.test.entity.KDInfo">
 		select * from KDINFO where phonenumber = #{phone}
 	</select>
 	
 	<insert id="KDShow" parameterType="org.test.entity.KDInfo">
 		insert into KDINFO values(seq_id.nextval,#{username},#{idcard},#{phonenumber},#{kdspeed},#{kdfy},#{address})
 	</insert>
 </mapper>